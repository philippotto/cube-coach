(this["webpackJsonpf2l-trainer"]=this["webpackJsonpf2l-trainer"]||[]).push([[0],{25:function(e,t,n){},48:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(37),c=n.n(r),o=(n(25),n(16)),s=n(8),l=n(14),u=n(38),d=n(43),b=(n(48),window.TTk);var f=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},h=n(1),R=(n(79),n(26),n(39)),g=(n(57),n(23)),j=n(42),v=n(5),U={signInSuccessUrl:"http://localhost:3000/",signInOptions:[h.default.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:"http://localhost:3000/",privacyPolicyUrl:function(){window.location.assign("http://localhost:3000/")}},O=new function e(t){Object(j.a)(this,e),this.db=h.default.apps.length?h.default.app().firestore():h.default.initializeApp(t).firestore(),this.db.enablePersistence(),this.auth=h.default.auth,this.functions=h.default.functions,this.storage=h.default.storage}({apiKey:"AIzaSyAsW-gj2dwZelNKR3GqLtemc2IfqUmH7BE",authDomain:"cube-coach.firebaseapp.com",projectId:"cube-coach",storageBucket:"cube-coach.appspot.com",messagingSenderId:"203860203888",appId:"1:203860203888:web:1359c3290de44d572357b5"}),p={H:"[M2 U M2 U2 M2 U M2]",Z:"[M2 U M2 U M' U2 M2 U2 M' U2]","U(a)":"[R2 U (R U R' U') (R' U') (R' U R')]","U(b)":"[(R U') (R U) (R U) (R U') R' U' R2]","A(a)":"[x R' U R' D2 R U' R' D2 R2]","A(b)":"[x' R2 U2 R D R' U2 R D' R]",T:"[R U R' U' R' F R2 U' R' U' R U R' F']","J(b)":"[R U R' F' R U R' U' R' F R2 U' R' U']","J(a)":"[U' R' U L' U2 R U' R' U2 R L]",Y:"[{F R U' R' U' R U R' F'} {R U R' U' R' F R F'}]","R(b)":"[(R' U2 R U2) (R' F) (R U R' U') (R' F') R2 U']","R(a)":"[(R U' R' U') R U R D (R' U' R) D' (R' U2 R')]","N(b)":"[{(R' U L') U2 (R U' L)}*2 U' ]","N(a)":"[(L U' R) U2 (L' U R')*2 U]",F:"[(R' U2 R' d') (R' F') (R2 U' R' U) (R' F R U' F)]",E:"[x' (R U' R') D (R U R') D' (R U R') D(R U' R') D']",V:"[(R' U R' d') (R' F') (R2 U' R' U) (R' F R F)]","G(a)":"[R2 u R' U R' U' R u' R2 (y' R' U R)]","G(b)":"[(R' U' R) y R2 u R' U R U' R u' R2]","G(c)":"[R2 u' R U' R U R' u R2 (y R U' R')]","G(d)":"[(R U R') y' R2 u' R U' R' U R' u R2]"},m=Object.keys(p),x={"R(a)":w("R U2 R' U2 R B' R' U' R U R B R2 U"),"A(a)":w("R' F R' B2 R F' R' B2 R2"),"A(b)":w("R B' R F2 R' B R F2 R2")};function k(e){return e.replace(/[\(\)\[\]\{\}]/g,"")}function w(e){return k(e).split(" ").reverse().map((function(e){return e.endsWith("'")?e.slice(0,-1):e.endsWith("2")?e:e+"'"})).join(" ")}function y(e,t){Object(i.useEffect)((function(){function n(e){e.key}var i=function(n){n.key===e&&t()};return window.addEventListener("keydown",n),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",i)}}),[t,e])}var N={width:360,height:384};function A(e){var t=e.id,n=e.algorithm,a=e.className,r=Object(i.useRef)(b.AlgorithmPuzzle(3).size(N));Object(i.useEffect)((function(){var e=k(n);console.log("algorithm",e),r.current.case(e)("#".concat(t))}),[t,n]);var c=function(){var e=Object(i.useState)({width:void 0,height:void 0}),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){function e(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}();if(null!=c.width&&null!=c.height){var o=Math.min(c.width,N.width),s=Math.min(.6*c.height,N.height);r.current.size({width:o,height:s})}return Object(v.jsx)("div",{id:t,className:a})}function E(e){var t=e.activePllIndex,n=m[t],i=p[n],a=x[n]||w(i);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"text-sm text-gray-500",children:["Setup ",n,":"]}),Object(v.jsx)("div",{className:"ml-2 text-blue-50 tracking-widest font-bold",children:a})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"text-sm text-gray-500",children:"Algorithm:"}),Object(v.jsx)("div",{className:"ml-2 text-blue-50 tracking-widest font-bold",children:i})]}),Object(v.jsx)(A,{id:"pllCube",className:"inline-block mx-auto",algorithm:i})]})}var F=function e(t,n,i){var a,r=function(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];e[a].disabled||(t[a]=e[a].ranking)}return t}(n),c=Math.min.apply(Math,Object(d.a)(Object.values(r))),o=[],s=Object(u.a)(m);try{for(s.s();!(a=s.n()).done;){var l=a.value;r[l]===c&&o.push(l)}}catch(h){s.e(h)}finally{s.f()}var b=Math.floor(Math.random()*o.length),f=m.indexOf(o[b]);r[m[f]];return i||null==t||t!==f?f:e(t,n,!0)},D={H:{ranking:10,disabled:!1},Z:{ranking:10,disabled:!1},"U(a)":{ranking:10,disabled:!1},"U(b)":{ranking:10,disabled:!1},"A(a)":{ranking:10,disabled:!1},"A(b)":{ranking:2,disabled:!1},T:{ranking:10,disabled:!1},"J(b)":{ranking:2,disabled:!1},"J(a)":{ranking:2,disabled:!1},Y:{ranking:10,disabled:!1},"R(b)":{ranking:1,disabled:!1},"R(a)":{ranking:10,disabled:!1},F:{ranking:10,disabled:!1},V:{ranking:10,disabled:!1},"N(b)":{ranking:0,disabled:!0},"N(a)":{ranking:0,disabled:!0},E:{ranking:0,disabled:!0},"G(a)":{ranking:0,disabled:!0},"G(b)":{ranking:0,disabled:!0},"G(c)":{ranking:0,disabled:!0},"G(d)":{ranking:0,disabled:!0}};function L(e){var t=e.algKey,n=e.stats,a=e.activePllKey,r=e.onToggleDisabled,c=e.onActivateAlg,o=a===t,u=n[t].disabled?"bg-gray-400":"bg-blue-500",d=o?"border-4 border-green-500":"",b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.shouldPreventDefault,r=void 0===a||a,c=n.delay,o=void 0===c?300:c,s=Object(i.useState)(!1),u=Object(l.a)(s,2),d=u[0],b=u[1],h=Object(i.useRef)(),R=Object(i.useRef)(),g=Object(i.useCallback)((function(t){r&&t.target&&(t.target.addEventListener("touchend",f,{passive:!1}),R.current=t.target),h.current=setTimeout((function(){e(t),b(!0)}),o)}),[e,o,r]),j=Object(i.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h.current&&clearTimeout(h.current),n&&!d&&t(),b(!1),r&&R.current&&R.current.removeEventListener("touchend",f)}),[r,t,d]);return{onMouseDown:function(e){return g(e)},onTouchStart:function(e){return g(e)},onMouseUp:function(e){return j(e)},onMouseLeave:function(e){return j(e,!1)},onTouchEnd:function(e){return j(e)}}}((function(){return c(t)}),(function(){return r(t)}));return Object(v.jsxs)("li",Object(s.a)(Object(s.a)({},b),{},{className:"".concat(u," ").concat(d," rounded-xl text-green-50 p-4 mb-4 mr-4 w-20"),children:[Object(v.jsx)("div",{className:"font-bold",children:t}),Object(v.jsx)("div",{className:"text-sm",children:n[t].ranking})]}))}function S(e){var t=e.stats,n=e.activePllKey,i=e.onToggleDisabled,a=e.onActivateAlg;return Object(v.jsx)("div",{className:"mx-auto inline-block mt-8",children:Object(v.jsx)("ul",{className:"flex flex-wrap",children:m.map((function(e){return Object(v.jsx)(L,{algKey:e,stats:t,activePllKey:n,onToggleDisabled:i,onActivateAlg:a},e)}))})})}function I(){var e=M();console.log("authState.user",e.user);var t="";return null!=e.user&&(t=e.user.displayName||e.user.email),Object(v.jsxs)("h1",{children:["Hello ",t]})}var M=function(){var e=Object(i.useState)((function(){var e=h.default.auth().currentUser;return{initializing:!e,user:e}})),t=Object(l.a)(e,2),n=t[0],a=t[1];function r(e){a({initializing:!1,user:e})}return Object(i.useEffect)((function(){var e=h.default.auth().onAuthStateChanged(r);return function(){return e()}}),[]),n};function P(e){var t=e.user,n=Object(g.useDocument)("statistics/".concat(t.uid)),i=n.data,a=n.update,r=n.error;if(console.log("user.id",t.id),console.log("error",r),console.log("data",i),r)return Object(v.jsx)("span",{children:"Error!"});if(!i)return Object(v.jsx)("span",{children:"Loading..."});return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"btn bg-gray-400",onClick:function(){a({obj:{someProperty:i.obj.someProperty+1}})},children:"Update"}),Object(v.jsxs)("span",{children:["Name: ",i.name," (",i.obj.someProperty,")"]})]})}function T(){var e=M(),t=!e.initializing&&null==e.user,n=!e.initializing&&null!=e.user;return Object(v.jsxs)(g.FuegoProvider,{fuego:O,children:[t?Object(v.jsx)("button",{onClick:function(){new R.a.AuthUI(h.default.auth()).start("#firebaseui-auth-container",U)},children:"Log In"}):null,n?Object(v.jsx)("button",{onClick:function(){h.default.auth().signOut()},children:"Log out"}):null,Object(v.jsx)(I,{}),n?Object(v.jsx)(P,{user:e.user}):null]})}var C=function(){var e=Object(i.useState)(function(e){try{return JSON.parse(e)}catch(t){return null}}(localStorage.getItem("stats"))||D),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(F(null,n)),u=Object(l.a)(c,2),d=u[0],b=u[1];!function(e,t){var n=a.a.useRef();a.a.useEffect((function(){n.current=e}),[e]),a.a.useEffect((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){localStorage.setItem("stats",JSON.stringify(n))}),1e3);var f=function(){var e=m[d];r(Object(s.a)(Object(s.a)({},n),{},Object(o.a)({},e,Object(s.a)(Object(s.a)({},n[e]),{},{ranking:n[e].ranking+1})))),b(F(d,n))},h=function(){var e=m[d];r(Object(s.a)(Object(s.a)({},n),{},Object(o.a)({},e,Object(s.a)(Object(s.a)({},n[e]),{},{ranking:n[e].ranking+1})))),b(F(d,n))};if(y("n",f),y("e",h),-1===d)return"Invalid pll index";var R=m[d];return Object(v.jsxs)("div",{className:"App bg-gray-900",children:[Object(v.jsx)(T,{}),Object(v.jsx)("h1",{className:"text-blue-50 text-6xl font-thin tracking-widest my-8",children:"Cube Coach"}),Object(v.jsx)(E,{activePllIndex:d}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:f,className:"btn bg-blue-500",children:"Next (+1)"}),Object(v.jsx)("button",{onClick:h,className:"btn bg-green-500  ml-8",children:"Next (+10)"}),Object(v.jsx)("button",{onClick:function(){b(F(d,n))},className:"btn bg-blue-500  ml-8",children:"Skip"})]}),Object(v.jsx)(S,{stats:n,activePllKey:R,onToggleDisabled:function(e){r(Object(s.a)(Object(s.a)({},n),{},Object(o.a)({},e,Object(s.a)(Object(s.a)({},n[e]),{},{disabled:!n[e].disabled}))))},onActivateAlg:function(e){var t=m.indexOf(e);b(t)}}),Object(v.jsx)("div",{id:"cube"}),Object(v.jsx)("div",{id:"mini-cube"}),Object(v.jsxs)("div",{style:{position:"absolute",top:0,left:0},children:[Object(v.jsx)("div",{id:"description_header"}),Object(v.jsx)("div",{id:"description"})]})]})},z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(v.jsx)(C,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("https://philippotto.github.io/cube-coach",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("https://philippotto.github.io/cube-coach","/service-worker.js");z?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):W(t,e)}))}}()}},[[78,1,2]]]);
//# sourceMappingURL=main.e869529e.chunk.js.map